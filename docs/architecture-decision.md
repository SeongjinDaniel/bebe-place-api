# 아키텍처 결정 기록 (ADR)

## ADR-001: DDD와 헥사고날 아키텍처 채택

**날짜**: 2025-08-21  
**상태**: 채택됨  

### 컨텍스트
중고거래 플랫폼의 복잡한 비즈니스 로직을 효과적으로 관리하고 유지보수성을 높이기 위한 아키텍처 선택이 필요했습니다.

### 결정
Domain-Driven Design과 헥사고날 아키텍처를 조합하여 사용하기로 결정했습니다.

### 이유
- **도메인 중심 설계**: 비즈니스 로직의 복잡성을 효과적으로 관리
- **관심사 분리**: 도메인, 애플리케이션, 인프라스트럭처 계층 분리
- **테스트 용이성**: 의존성 역전을 통한 단위 테스트 향상
- **확장성**: 새로운 기능 추가 시 기존 코드에 미치는 영향 최소화

### 결과
- 각 Bounded Context가 명확하게 분리됨
- 포트와 어댑터 패턴으로 외부 의존성 관리
- 도메인 로직의 순수성 보장

---

## ADR-002: Kotlin과 Spring Boot 선택

**날짜**: 2025-08-21  
**상태**: 채택됨  

### 컨텍스트
개발 생산성과 안정성을 고려한 기술 스택 선택이 필요했습니다.

### 결정
Kotlin + Spring Boot를 메인 기술 스택으로 선택했습니다.

### 이유
- **Null Safety**: Kotlin의 null 안전성으로 런타임 에러 방지
- **간결성**: Java 대비 간결한 문법으로 개발 생산성 향상
- **상호 운용성**: Java 라이브러리와의 완벽한 호환성
- **Spring 생태계**: 성숙한 Spring Boot 생태계 활용

---

## ADR-003: 실시간 채팅을 위한 WebSocket 사용

**날짜**: 2025-08-21  
**상태**: 채택됨  

### 컨텍스트
사용자 간 실시간 채팅과 가격 제안 기능을 위한 통신 방식 선택이 필요했습니다.

### 결정
WebSocket과 STOMP 프로토콜을 사용하여 실시간 통신을 구현하기로 결정했습니다.

### 이유
- **실시간성**: 즉시적인 메시지 전달 보장
- **양방향 통신**: 클라이언트-서버 간 자유로운 통신
- **표준화**: STOMP 프로토콜로 메시지 라우팅 표준화
- **Spring 지원**: Spring WebSocket의 안정적인 지원

---

## ADR-004: 이벤트 주도 아키텍처 부분 적용

**날짜**: 2025-08-21  
**상태**: 채택됨  

### 컨텍스트
Bounded Context 간의 느슨한 결합을 위한 통신 방식이 필요했습니다.

### 결정
도메인 이벤트를 활용한 이벤트 주도 아키텍처를 부분적으로 적용하기로 결정했습니다.

### 이유
- **느슨한 결합**: Context 간 직접적인 의존성 제거
- **확장성**: 새로운 이벤트 핸들러 추가 용이
- **일관성**: 최종 일관성을 통한 시스템 안정성
- **추적성**: 이벤트 로그를 통한 시스템 상태 추적

### 구현 방식
- Spring Application Events 활용
- 각 Bounded Context 내부에서 도메인 이벤트 발행
- 다른 Context의 이벤트 핸들러에서 수신 처리

---

## ADR-005: 단일 데이터베이스 사용

**날짜**: 2025-08-21  
**상태**: 채택됨  

### 컨텍스트
초기 개발 단계에서 데이터 저장소 전략을 결정해야 했습니다.

### 결정
모든 Bounded Context가 단일 PostgreSQL 데이터베이스를 공유하되, 스키마 수준에서 분리하기로 결정했습니다.

### 이유
- **개발 복잡성**: 초기 단계에서 분산 데이터베이스의 복잡성 회피
- **트랜잭션 일관성**: 단일 DB 내에서 ACID 보장
- **운영 부담**: 다중 데이터베이스 운영 부담 최소화
- **마이그레이션 계획**: 향후 필요시 데이터베이스 분리 가능한 구조 유지

### 미래 고려사항
- 트래픽 증가 시 읽기 전용 복제본 고려
- 특정 Context의 독립적인 확장 필요 시 데이터베이스 분리 검토